#!/bin/bash

tmux has-session -t main 2>/dev/null

if [ $? != 0 ]; then
    # Create a new tmux session named 'main'
    tmux new-session -d -s main

    tmux send-keys -t main:1 'vim ~/Documents/worklog.md' C-m
    sleep 1
    tmux rename-window -t main:1 -n 'worklog'

    tmux new-window -t main:2 -n 'lazygit'
    tmux send-keys -t main:2 'cd ~/work/atomic-engine-2 && lazygit' C-m

    tmux new-window -t main:3 -n 'dev_tools:services'
    tmux send-keys -t main:3 'cd ~/work/dev_tools/devbox/ && devbox services up' C-m

    tmux new-window -t main:4 -n 'dev_tools:commands'
    tmux send-keys -t main:4 'cd ~/work/dev_tools/devbox/ && devbox shell' C-m

    tmux new-window -t main:4
fi

# Attach to the session
tmux attach -t main

tmux select-window -t 1
